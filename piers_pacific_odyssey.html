<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Piers Family Pacific Odyssey – Summer 2026</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'DM Sans', sans-serif; background: #0a0e1a; }
  #map { width: 100vw; height: 100vh; background: #0f1628; }
  #loading {
    position: fixed; inset: 0; z-index: 9999;
    display: flex; align-items: center; justify-content: center;
    background: #0a0e1a; color: rgba(255,255,255,0.5);
    font-family: 'DM Sans', sans-serif; font-size: 14px;
  }

  .leaflet-control-attribution { display: none !important; }
  .leaflet-control-zoom { display: none !important; }

  .stop-marker {
    display: flex; align-items: center; justify-content: center;
    border-radius: 50%; border: 2.5px solid rgba(255,255,255,0.9);
    box-shadow: 0 2px 12px rgba(0,0,0,0.5);
    font-size: 18px; line-height: 1;
    transition: transform 0.2s ease;
  }
  .stop-marker:hover { transform: scale(1.15); }
  .stop-marker.major { width: 38px; height: 38px; }
  .stop-marker.minor { width: 30px; height: 30px; font-size: 14px; }

  .stop-label {
    background: rgba(12, 14, 28, 0.92);
    backdrop-filter: blur(8px);
    border-radius: 10px;
    padding: 8px 12px;
    border: 1px solid rgba(255,255,255,0.12);
    min-width: 150px;
    pointer-events: none;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  }
  .stop-label .label-tag {
    font-size: 8px; letter-spacing: 2px; font-weight: 700;
    text-transform: uppercase; margin-bottom: 2px;
  }
  .stop-label .label-name {
    font-size: 14px; font-weight: 800; color: #fff;
    font-family: 'Playfair Display', serif;
  }
  .stop-label .label-date {
    font-size: 10px; color: rgba(255,255,255,0.55); font-weight: 600;
    margin-top: 1px;
  }
  .stop-label .label-detail {
    font-size: 9.5px; color: rgba(255,255,255,0.4); margin-top: 3px;
    line-height: 1.4;
  }

  #title-overlay {
    position: fixed; top: 20px; left: 20px; z-index: 1000;
    pointer-events: none;
  }
  #title-overlay .subtitle {
    font-size: 10px; letter-spacing: 3px; color: rgba(255,255,255,0.35);
    font-weight: 700; margin-bottom: 4px;
  }
  #title-overlay .title {
    font-size: 30px; font-weight: 800; color: #fff;
    font-family: 'Playfair Display', serif; line-height: 1.1;
    text-shadow: 0 2px 16px rgba(0,0,0,0.6);
  }
  #title-overlay .meta {
    font-size: 12px; color: rgba(255,255,255,0.4); margin-top: 5px; font-weight: 500;
  }

  #legend {
    position: fixed; bottom: 20px; left: 20px; z-index: 1000;
    display: flex; gap: 16px; flex-wrap: wrap;
    background: rgba(10,14,26,0.85); backdrop-filter: blur(10px);
    border-radius: 12px; padding: 10px 16px;
    border: 1px solid rgba(255,255,255,0.08);
    pointer-events: none;
  }
  .li { display: flex; align-items: center; gap: 6px; }
  .ll { width: 20px; height: 0; }
  .lt { font-size: 10px; color: rgba(255,255,255,0.45); font-weight: 600; letter-spacing: 0.4px; }

  #stats {
    position: fixed; top: 20px; right: 20px; z-index: 1000;
    display: flex; gap: 8px; pointer-events: none;
  }
  .stat-badge {
    background: rgba(10,14,26,0.85); backdrop-filter: blur(10px);
    border-radius: 10px; padding: 7px 14px; text-align: center;
    border: 1px solid rgba(255,255,255,0.08);
  }
  .stat-badge .sl {
    font-size: 8px; letter-spacing: 1.5px; color: rgba(255,255,255,0.35); font-weight: 700;
  }
  .stat-badge .sv {
    font-size: 14px; font-weight: 700; margin-top: 1px;
  }
</style>
</head>
<body>

<div id="loading">Loading map…</div>
<div id="map"></div>

<div id="title-overlay">
  <div class="subtitle">PIERS FAMILY · SUMMER 2026</div>
  <div class="title">Pacific Odyssey</div>
  <div class="meta">Jun 23 – Jul 28 · 36 days · 5 travelers</div>
</div>

<div id="stats">
  <div class="stat-badge"><div class="sl">FLIGHTS</div><div class="sv" style="color:#4ecdc4">7 legs</div></div>
  <div class="stat-badge"><div class="sl">TRAINS</div><div class="sv" style="color:#f7d794">2 legs</div></div>
  <div class="stat-badge"><div class="sl">CRUISE</div><div class="sv" style="color:#e056a0">7 nights</div></div>
  <div class="stat-badge"><div class="sl">DISNEY</div><div class="sv" style="color:#f8b500">4 parks</div></div>
</div>

<div id="legend">
  <div class="li"><div class="ll" style="border-top:2.5px dashed #4ecdc4"></div><span class="lt">Flight</span></div>
  <div class="li"><div class="ll" style="border-top:3px dashed #f7d794"></div><span class="lt">Bullet Train</span></div>
  <div class="li"><div class="ll" style="border-top:2.5px solid #e056a0"></div><span class="lt">Cruise</span></div>
  <div class="li"><div class="ll" style="border-top:2px dashed rgba(255,255,255,0.25)"></div><span class="lt">Drive</span></div>
</div>

<script>
function loadCSS(url) {
  return new Promise(function(resolve) {
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = url;
    link.onload = resolve;
    link.onerror = resolve;
    document.head.appendChild(link);
  });
}
function loadJS(url) {
  return new Promise(function(resolve, reject) {
    var s = document.createElement('script');
    s.src = url;
    s.onload = resolve;
    s.onerror = reject;
    document.head.appendChild(s);
  });
}

(async function init() {
  await loadCSS('https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css');
  await loadJS('https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js');
  document.getElementById('loading').style.display = 'none';
  buildMap();
})();

function buildMap() {

  // Center: Asia/AUS on left, Americas on right
  var map = L.map('map', {
    center: [8, -170],
    zoom: 3,
    minZoom: 2,
    maxZoom: 8,
    zoomControl: false,
    attributionControl: false,
  });

  // Dark tiles — CartoDB dark_all (no key needed)
  L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
    subdomains: 'abcd',
    maxZoom: 19,
  }).addTo(map);

  // ── Stops ──
  var stops = [
    { id:"sea", name:"Seattle", lat:47.45, lng:-122.31, icon:"\u2708\uFE0F", color:"#4ecdc4", size:"major", tag:"HOME", tagColor:"#4ecdc4", date:"Jun 23 departure \xb7 Jul 28 return", detail:"AS 628 out \xb7 AS 900 First Class home", labelDir:"left" },
    { id:"bne", name:"Brisbane", lat:-27.38, lng:153.12, icon:"\uD83E\uDD98", color:"#f8b500", size:"major", tag:"AUSTRALIA", tagColor:"#f8b500", date:"Jun 25 \u2013 Jul 14 \xb7 19 days", detail:"Europcar Ford Everest \xb7 Carnival Encounter cruise", labelDir:"right" },
    { id:"springbrook", name:"Springbrook", lat:-28.21, lng:153.27, icon:"\uD83C\uDF3F", color:"#00b894", size:"minor", tag:"RAINFOREST", tagColor:"#00b894", date:"Jun 30 \u2013 Jul 2 \xb7 2 nights", detail:"The Mouses House Retreat", labelDir:"right" },
    { id:"zoo", name:"Australia Zoo", lat:-26.84, lng:152.96, icon:"\uD83D\uDC0A", color:"#00b894", size:"minor", tag:"ACTIVITY", tagColor:"#00b894", date:"Jul 2 \xb7 Day trip", detail:"Beerwah, Sunshine Coast", labelDir:"right" },
    { id:"willis", name:"Willis Islets", lat:-16.3, lng:150.0, icon:"\uD83D\uDEA2", color:"#e056a0", size:"minor", tag:"CRUISE PORT", tagColor:"#e056a0", date:"Jul 6", detail:"Coral Sea", labelDir:"right" },
    { id:"cairns", name:"Cairns", lat:-16.92, lng:145.77, icon:"\uD83E\uDD3F", color:"#e056a0", size:"minor", tag:"CRUISE PORT", tagColor:"#e056a0", date:"Jul 7 \xb7 GBR Scuba", detail:"Great Barrier Reef dive 12\u20133 PM", labelDir:"left" },
    { id:"airlie", name:"Airlie Beach", lat:-20.27, lng:148.72, icon:"\uD83C\uDFDD\uFE0F", color:"#e056a0", size:"minor", tag:"CRUISE PORT", tagColor:"#e056a0", date:"Jul 9 \xb7 Whitsundays", detail:"Carnival Encounter", labelDir:"left" },
    { id:"hkg", name:"Hong Kong", lat:22.32, lng:114.17, icon:"\uD83C\uDFF0", color:"#e056a0", size:"major", tag:"DISNEY", tagColor:"#e056a0", date:"Jul 15 \xb7 1 day", detail:"HK Disneyland \xb7 Disney Explorers Lodge", labelDir:"bottom" },
    { id:"sha", name:"Shanghai", lat:31.23, lng:121.47, icon:"\uD83C\uDF86", color:"#e056a0", size:"major", tag:"DISNEY", tagColor:"#e056a0", date:"Jul 15\u201317 \xb7 2 nights", detail:"Shanghai Disneyland Hotel \xb7 LinaBell Overlay \xb7 \xa58,411", labelDir:"top" },
    { id:"kix", name:"Osaka", lat:34.43, lng:135.23, icon:"\uD83D\uDE84", color:"#f7d794", size:"minor", tag:"TRANSIT", tagColor:"#f7d794", date:"Jul 17\u201318", detail:"PVG\u2192KIX flight \xb7 Shinkansen to Tokyo", labelDir:"left" },
    { id:"tyo", name:"Tokyo Disney", lat:35.63, lng:139.88, icon:"\uD83D\uDDFC", color:"#e17055", size:"major", tag:"DISNEY", tagColor:"#e17055", date:"Jul 19\u201321 \xb7 3 nights", detail:"Fantasy Springs Hotel \xb7 DisneySea & Disneyland \xb7 \xa5843,200 pkg", labelDir:"top" },
    { id:"hnl", name:"Honolulu", lat:21.31, lng:-157.86, icon:"\uD83C\uDF3A", color:"#00cec9", size:"major", tag:"AULANI", tagColor:"#00cec9", date:"Jul 21\u201327 \xb7 6 nights", detail:"DVC 1BR Ocean View Villa \xb7 372 pts \xb7 Avis rental", labelDir:"bottom" },
  ];

  // ── Place markers + labels ──
  stops.forEach(function(s) {
    var sizeClass = s.size === 'major' ? 'major' : 'minor';
    var px = s.size === 'major' ? 38 : 30;

    var markerIcon = L.divIcon({
      className: '',
      html: '<div class="stop-marker ' + sizeClass + '" style="background:' + s.color + '; width:' + px + 'px; height:' + px + 'px;">' + s.icon + '</div>',
      iconSize: [px, px],
      iconAnchor: [px/2, px/2],
    });

    L.marker([s.lat, s.lng], {
      icon: markerIcon,
      zIndexOffset: s.size === 'major' ? 1000 : 500
    }).addTo(map);

    var labelOffsets = {
      top:    [0, -60],
      bottom: [0, 30],
      left:   [-170, -20],
      right:  [30, -20],
    };
    var off = labelOffsets[s.labelDir] || labelOffsets.top;

    var labelIcon = L.divIcon({
      className: '',
      html: '<div class="stop-label">' +
        '<div class="label-tag" style="color:' + s.tagColor + '">' + s.tag + '</div>' +
        '<div class="label-name">' + s.name + '</div>' +
        '<div class="label-date">' + s.date + '</div>' +
        '<div class="label-detail">' + s.detail + '</div>' +
        '</div>',
      iconSize: [160, 70],
      iconAnchor: [-off[0], -off[1]],
    });

    L.marker([s.lat, s.lng], {
      icon: labelIcon,
      zIndexOffset: 100,
      interactive: false
    }).addTo(map);
  });

  // ── Curved flight arcs ──
  function flightArc(from, to, numPoints) {
    numPoints = numPoints || 80;
    var pts = [];
    var lngFrom = from[1], lngTo = to[1];
    var diff = lngTo - lngFrom;
    if (diff > 180) lngTo -= 360;
    else if (diff < -180) lngTo += 360;
    for (var i = 0; i <= numPoints; i++) {
      var t = i / numPoints;
      var lat = from[0] + (to[0] - from[0]) * t;
      var lng = lngFrom + (lngTo - lngFrom) * t;
      var arc = Math.sin(t * Math.PI) * (Math.abs(to[0] - from[0]) * 0.12 + 2);
      pts.push([lat + arc, lng]);
    }
    return pts;
  }

  // Flights (teal dashed)
  var flights = [
    { from: [47.45, -122.31], to: [-27.38, 153.12] },   // SEA→BNE consolidated
    { from: [-27.38, 153.12], to: [22.32, 114.17] },     // BNE→HKG
    { from: [31.23, 121.47],  to: [34.43, 135.23] },     // PVG→KIX
    { from: [35.63, 139.88],  to: [21.31, -157.86] },    // HND→HNL
    { from: [21.31, -157.86], to: [47.45, -122.31] },    // HNL→SEA
  ];

  flights.forEach(function(f) {
    var arc = flightArc(f.from, f.to);
    L.polyline(arc, {
      color: '#4ecdc4',
      weight: 2.5,
      opacity: 0.7,
      dashArray: '8 5',
      smoothFactor: 1,
    }).addTo(map);
  });

  // Bullet trains (gold dashed)
  var trains = [
    { from: [22.32, 114.17], to: [31.23, 121.47] },   // HKG→SHA
    { from: [34.43, 135.23], to: [35.63, 139.88] },    // Osaka→Tokyo
  ];

  trains.forEach(function(t) {
    L.polyline([t.from, t.to], {
      color: '#f7d794',
      weight: 3,
      opacity: 0.85,
      dashArray: '6 8',
    }).addTo(map);
  });

  // Cruise route (solid magenta)
  var cruiseRoute = [
    [-27.38, 153.12],
    [-21.0, 152.5],
    [-16.3, 150.0],
    [-16.92, 145.77],
    [-20.27, 148.72],
    [-24.0, 151.5],
    [-27.38, 153.12],
  ];

  L.polyline(cruiseRoute, {
    color: '#e056a0',
    weight: 2.5,
    opacity: 0.65,
    smoothFactor: 2,
  }).addTo(map);

  // Drives (faint white dashed)
  var drives = [
    [[-27.38, 153.12], [-28.21, 153.27]],
    [[-28.21, 153.27], [-26.84, 152.96]],
    [[-26.84, 152.96], [-27.38, 153.12]],
  ];

  drives.forEach(function(d) {
    L.polyline(d, {
      color: 'rgba(255,255,255,0.25)',
      weight: 1.5,
      dashArray: '4 6',
    }).addTo(map);
  });

} // end buildMap
</script>
</body>
</html>
